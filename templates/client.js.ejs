// do not modify: this code is automatically generated

// api dependencies
var http = require('superagent');

// api definition
var api = module.exports = {};
<% for (var name in endpoints) { %>
<% var endpoint = endpoints[name] %>
// <%= endpoint.help || 'no help defined' %>
api.<%= name %> = function(ctx, opts, cb) {
  var url = this.config.getBase() + '<%= endpoint.url %>';
  var method = '<%= endpoints[name].method.toLowerCase() %>';
  var xhr = http[method](url);
  xhr.set({
    'Content-Type': 'application/json',
    'X-Requested-With': 'XMLHttpRequest'
  });
  if (method === 'post' || method === 'put') {
    xhr.send(opts);
  } else {
    xhr.query(opts);
  }
  xhr.end(function(err, response) {
    if (err) {
      return cb(err);
    }
    return cb(null, response.body);
  });
}<% } %>
